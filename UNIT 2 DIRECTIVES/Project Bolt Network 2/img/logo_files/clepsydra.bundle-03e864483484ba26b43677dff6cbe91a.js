!function(e){function n(i){if(t[i])return t[i].exports;var a=t[i]={exports:{},id:i,loaded:!1};return e[i].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}({0:function(e,n,t){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}function a(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();Object.defineProperty(n,"__esModule",{value:!0});var o=t(778),u=i(o),s=t(578),c=i(s),d=function(){function e(){var n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];a(this,e),this.host=n.host||"http://localhost:24752",this.tags=n.tags||[],this.user_id=n.user_id,this.auth_token=n.auth_token,this.last_time=0,this.beacon=new c["default"](this.host+"/drip"),u["default"].init({userTimingHandler:this.sendUserTiming.bind(this),eventHandler:this.sendTiming.bind(this),reportInterval:n.reportInterval})}return r(e,[{key:"addTags",value:function(){for(var e=arguments.length,n=Array(e),t=0;e>t;t++)n[t]=arguments[t];this.tags.push(n)}},{key:"sendUserTiming",value:function(e){}},{key:"sendTiming",value:function(e){var n=new FormData;n.append("user_id",this.user_id),n.append("auth_token",this.auth_token),n.append("duration",e-this.last_time),n.append("date",(new Date).toISOString().substring(0,10)),this.tags.forEach(function(e){n.append("tags",e)}),this.beacon.send(n),this.last_time=e}}]),e}();n["default"]=new d({host:window.CCDATA.clepsydra.host,tags:window.CCDATA.clepsydra.tags,user_id:window.CCDATA.current_user._id,auth_token:window.CCDATA.current_user.authentication_token})},578:function(e,n){"use strict";function t(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var i=function(){function e(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(n,t,i){return t&&e(n.prototype,t),i&&e(n,i),n}}();Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function e(n){var i=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];t(this,e),this.useBeacon=!i&&window.navigator&&"function"==typeof window.navigator.sendBeacon,this.url=n}return i(e,[{key:"send",value:function(e){this.useBeacon?this.sendBeacon(e):this.sendXHR(e)}},{key:"sendBeacon",value:function(e){navigator.sendBeacon(this.url,e)}},{key:"sendXHR",value:function(e){var n=new XMLHttpRequest;n.open("POST",this.url,!0),!e instanceof FormData&&n.setRequestHeader("Content-Type","text/plain;charset=UTF-8"),n.send(e)}},{key:"url",set:function(e){this._url=e},get:function(){return this._url}}]),e}();n["default"]=a},778:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});/*!
	 * @preserve
	 * riveted.js | v0.6.0
	 * Copyright (c) 2015 Rob Flaherty (@robflaherty)
	 * Licensed under the MIT license
	 */
var t=function(){function e(e){e=e||{},p=parseInt(e.reportInterval,10)||5,g=parseInt(e.idleTimeout,10)||30,b=e.gaGlobal||"ga","function"==typeof window[b]&&(y=!0),"undefined"!=typeof _gaq&&"function"==typeof _gaq.push&&(w=!0),"undefined"!=typeof dataLayer&&"function"==typeof dataLayer.push&&(_=!0),T="gaTracker"in e&&"string"==typeof e.gaTracker?e.gaTracker+".send":"send","function"==typeof e.eventHandler&&(v=e.eventHandler),"function"==typeof e.userTimingHandler&&(h=e.userTimingHandler),m="nonInteraction"in e&&(e.nonInteraction===!1||"false"===e.nonInteraction)?!1:!0,t(document,"keydown",f),t(document,"click",f),t(window,"mousemove",n(f,500)),t(window,"scroll",n(f,500)),t(document,"visibilitychange",a),t(document,"webkitvisibilitychange",a)}function n(e,n){var t,i,a,r=null,o=0,u=function(){o=new Date,r=null,a=e.apply(t,i)};return function(){var s=new Date;o||(o=s);var c=n-(s-o);return t=this,i=arguments,0>=c?(clearTimeout(r),r=null,o=s,a=e.apply(t,i)):r||(r=setTimeout(u,c)),a}}function t(e,n,t){e.addEventListener?e.addEventListener(n,t,!1):e.attachEvent?e.attachEvent("on"+n,t):e["on"+n]=t}function i(){clearTimeout(A),o()}function a(){(document.hidden||document.webkitHidden)&&i()}function r(){D+=1,D>0&&D%p===0&&v(D)}function o(){I=!0,clearTimeout(H)}function u(){i(),C=!0}function s(){C=!1}function c(){I=!1,clearTimeout(H),H=setInterval(r,1e3)}function d(){var e=new Date,n=e-R;k=!0,h(n),H=setInterval(r,1e3)}function l(){R=new Date,D=0,k=!1,I=!1,clearTimeout(H),clearTimeout(A)}function f(){C||(k||d(),I&&c(),clearTimeout(A),A=setTimeout(i,1e3*g+100))}var v,h,p,g,m,y,w,T,_,b,k=!1,I=!1,C=!1,D=0,R=new Date,H=null,A=null;return h=function(e){_?dataLayer.push({event:"RivetedTiming",eventCategory:"Riveted",timingVar:"First Interaction",timingValue:e}):(y&&window[b](T,"timing","Riveted","First Interaction",e),w&&_gaq.push(["_trackTiming","Riveted","First Interaction",e,null,100]))},v=function(e){_?dataLayer.push({event:"Riveted",eventCategory:"Riveted",eventAction:"Time Spent",eventLabel:e,eventValue:p,eventNonInteraction:m}):(y&&window[b](T,"event","Riveted","Time Spent",e.toString(),p,{nonInteraction:m}),w&&_gaq.push(["_trackEvent","Riveted","Time Spent",e.toString(),p,m]))},{init:e,trigger:f,setIdle:i,on:s,off:u,reset:l}}();n["default"]=t}});
